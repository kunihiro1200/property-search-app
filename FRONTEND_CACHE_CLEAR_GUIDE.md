# フロントエンド表示問題の解決ガイド

## 問題の状況

- ✅ データベースには`inquiry_year`と`inquiry_site`が正しく保存されている
- ✅ バックエンドAPIは正しいデータを返している
- ❌ フロントエンドで反響年とサイトが表示されない

## 原因

フロントエンドまたはブラウザのキャッシュが古いコードを使用している可能性があります。

## 解決方法

### 方法1: ブラウザのハードリフレッシュ（最も簡単）

1. ブラウザで売主リストまたは売主詳細ページを開く
2. 以下のキーを押してハードリフレッシュ：
   - **Windows/Linux**: `Ctrl + Shift + R` または `Ctrl + F5`
   - **Mac**: `Cmd + Shift + R`
3. ページが完全にリロードされるまで待つ
4. 反響年とサイトが表示されるか確認

### 方法2: ブラウザのキャッシュをクリア

1. ブラウザの設定を開く
2. 「閲覧履歴データの削除」または「キャッシュのクリア」を選択
3. 「キャッシュされた画像とファイル」を選択
4. 「データを削除」をクリック
5. ブラウザを再起動
6. アプリケーションを開いて確認

### 方法3: フロントエンドを再ビルド

```bash
cd frontend
npm run dev
```

または、キャッシュをクリアして再ビルド：

```bash
cd frontend
clear-cache-and-rebuild.bat
```

### 方法4: 開発者ツールでキャッシュを無効化

1. ブラウザで `F12` を押して開発者ツールを開く
2. 「Network」タブを開く
3. 「Disable cache」にチェックを入れる
4. 開発者ツールを開いたままページをリロード

## 確認方法

### 売主リストページで確認

1. 売主リストページ（`/sellers`）を開く
2. テーブルのヘッダーに以下が表示されているか確認：
   - 売主番号
   - 名前
   - **反響年** ← これが表示されるはず
   - **反響日付** ← これが表示されるはず
   - **サイト** ← これが表示されるはず
   - 確度
   - ステータス

3. AA13424の行を確認：
   - 反響年: **2026**
   - 反響日付: **-**（スプレッドシートで未定義のため）
   - サイト: **H**

### 売主詳細ページで確認

1. AA13424の詳細ページを開く
2. 左側の情報パネルに以下が表示されているか確認：
   - **反響年**: 2026
   - **サイト**: H
   - 問い合わせ日: -（未定義）

## トラブルシューティング

### それでも表示されない場合

1. **バックエンドが起動しているか確認**
   ```bash
   cd backend
   npm run dev
   ```

2. **APIレスポンスを確認**
   ```bash
   cd backend
   npx ts-node test-aa13424-api-response.ts
   ```
   
   以下が表示されるはずです：
   ```
   反響年表示: ✅ 2026
   サイト表示: ✅ H
   ```

3. **ブラウザのコンソールでエラーを確認**
   - `F12`を押して開発者ツールを開く
   - 「Console」タブでエラーメッセージを確認
   - エラーがあればスクリーンショットを撮って報告

4. **ネットワークタブでAPIレスポンスを確認**
   - `F12`を押して開発者ツールを開く
   - 「Network」タブを開く
   - ページをリロード
   - `sellers`または`sellers/[id]`のリクエストをクリック
   - 「Response」タブで`inquiryYear`と`inquirySite`が含まれているか確認

## 期待される表示

### AA13424の場合

- ✅ 反響年: **2026**
- ⚠️ 反響日付: **-**（スプレッドシートで未定義）
- ✅ サイト: **H**
- ✅ 物件所在地: 大分市末広町2丁目4-21グリーヒル大分駅前レジデンス905
- ✅ 種別: マンション
- ✅ 状況（売主）: 居

## 今後の新規売主について

修正後は、新規売主が追加されると自動的に以下が同期されます：

- ✅ 反響年（`inquiry_year`）
- ✅ 反響日（`inquiry_date`）- スプレッドシートに値がある場合
- ✅ サイト（`inquiry_site`）
- ✅ 物件情報

自動同期は5分間隔で実行されます。

## まとめ

1. **まずブラウザのハードリフレッシュを試す**（`Ctrl + Shift + R`）
2. それでもダメなら**ブラウザのキャッシュをクリア**
3. それでもダメなら**フロントエンドを再起動**
4. それでもダメなら**開発者ツールでエラーを確認**

ほとんどの場合、ブラウザのハードリフレッシュで解決します。
