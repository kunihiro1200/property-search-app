# スタッフ管理スプレッドシート定義

## ⚠️ 重要：スタッフ管理のスプレッドシート

スタッフ（従業員）の管理に使用するスプレッドシートの定義です。

---

## 📋 スプレッドシート情報

| 項目 | 値 |
|------|-----|
| **スプレッドシートID** | `19yAuVYQRm-_zhjYX7M7zjiGbnBibkG77Mpz93sN1xxs` |
| **シート名** | スタッフ管理（要確認） |

---

## 📊 カラム定義

| 列 | カラム名 | 説明 |
|----|---------|------|
| A | イニシャル | スタッフのイニシャル（Y, U, I, K, M, W など） |
| B | 名前 | スタッフの氏名 |
| ... | ... | ... |
| **I** | **通常** | **通常スタッフかどうか（TRUE/FALSE）** |

---

## 🎯 「通常」カラムの定義

**列**: I列

**用途**: 
- 訪問予定/訪問済みのサイドバー表示で、どのスタッフを表示するか決定
- 「通常=TRUE」のスタッフのみがサイドバーに表示される

**値**:
- `TRUE` または `○` → 通常スタッフ（サイドバーに表示）
- `FALSE` または 空欄 → 通常外スタッフ（サイドバーに表示しない）

---

## 🔍 使用例

### 訪問予定/訪問済みのフィルタリング

サイドバーで訪問予定/訪問済みを表示する際、「通常=TRUE」のスタッフのみを対象とする。

```typescript
// スタッフ管理スプレッドシートから「通常=TRUE」のイニシャルを取得
const normalStaffInitials = ['Y', 'U', 'I', 'K', 'M', 'W']; // 例

// 訪問予定/訪問済みのフィルタリング
const visitScheduled = sellers.filter(s => 
  normalStaffInitials.includes(s.visit_assignee) &&
  s.visit_date >= today
);
```

---

## 📝 データベースとの連携

### employeesテーブル

現在、`employees`テーブルには`is_normal`カラムが**存在しない**。

**今後の対応**:
1. `employees`テーブルに`is_normal`カラムを追加
2. スタッフ管理スプレッドシートのI列（通常）と同期

または

1. スタッフ管理スプレッドシートから直接「通常」フラグを取得
2. サイドバー表示時に動的にフィルタリング

---

## 🚨 注意事項

### 営担（visit_assignee）の値

売主リストの「営担」カラムには、以下のような値が入る可能性がある：

**通常スタッフ（例）**:
- Y, U, I, K, M, W など（アルファベット1文字）

**通常外スタッフ（例）**:
- 久, 和, 林, 生 など（漢字）
- NO, Ｙ（全角）など

**特殊な値**:
- `外す` → 営担から外す（訪問予定/訪問済みに含めない）

---

## まとめ

**スタッフ管理スプレッドシート**:
- **ID**: `19yAuVYQRm-_zhjYX7M7zjiGbnBibkG77Mpz93sN1xxs`
- **通常カラム**: **I列**
- **用途**: 訪問予定/訪問済みのサイドバー表示で、どのスタッフを表示するか決定

**このドキュメントを参照して、スタッフの「通常」フラグを正しく扱ってください。**

---

**最終更新日**: 2026年2月1日  
**作成理由**: スタッフ管理スプレッドシートの定義を明確化し、毎回確認する手間を省くため
