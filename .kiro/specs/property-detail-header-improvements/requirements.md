# 要件定義書

## はじめに

物件リスト管理画面の物件詳細ページ（PropertyListingDetailPage.tsx）において、ユーザビリティを向上させるための2つのUI改善を実装します。物件番号のコピー機能と買主候補リストへのアクセス性を改善することで、日常業務の効率化を図ります。

## 用語集

- **PropertyListingDetailPage**: 物件リスト管理画面の物件詳細ページコンポーネント
- **物件番号**: 物件を一意に識別する番号（例: AA13501）
- **買主候補リスト**: 特定の物件に興味を持つ可能性のある買主のリスト
- **BuyerCandidateList**: 買主候補リストを表示するコンポーネント
- **スナックバー**: 画面下部に表示される一時的な通知メッセージ
- **クリップボード**: OSのコピー&ペースト機能で使用される一時的なデータ保存領域
- **バッジ**: 数値や状態を示す小さな視覚的インジケーター

## 要件

### 要件1: 物件番号のワンクリックコピー機能

**ユーザーストーリー**: 物件管理者として、物件番号を他のシステムやメールに貼り付けるために、物件番号を素早くコピーしたい

#### 受入基準

1. WHEN ユーザーが物件詳細ページのヘッダーを表示する THEN システムは物件番号の横にコピーアイコンボタンを表示する
2. WHEN ユーザーがコピーアイコンボタンをクリックする THEN システムは物件番号をクリップボードにコピーする
3. WHEN 物件番号のコピーが成功する THEN システムはスナックバーで「物件番号をコピーしました」と通知を表示する
4. WHEN コピー操作が失敗する THEN システムはスナックバーでエラーメッセージを表示する
5. THE コピーアイコンボタンは物件番号のテキストの直後に配置される

### 要件2: 買主候補リストへのアクセス改善

**ユーザーストーリー**: 物件管理者として、物件詳細ページから買主候補リストに素早くアクセスしたい

#### 受入基準

1. WHEN ユーザーが物件詳細ページのヘッダーを表示する THEN システムはヘッダーエリアに「買主候補リスト」ボタンを表示する
2. WHEN 買主候補リストのデータが取得される THEN システムはボタンに候補件数のバッジを表示する（例: 「買主候補リスト (15件)」）
3. WHEN ユーザーが「買主候補リスト」ボタンをクリックする THEN システムは買主候補リストページを新しいタブで開く
4. THE 買主候補リストページのURLは `/property-listings/${propertyNumber}/buyer-candidates` である
5. WHEN 買主候補リストのデータ取得が失敗する THEN システムはボタンに候補件数を表示せず、ボタンは引き続き機能する

### 要件3: 既存機能の維持

**ユーザーストーリー**: システム管理者として、既存の機能が正常に動作し続けることを確認したい

#### 受入基準

1. THE 既存のヘッダー要素（保存ボタン、Gmail配信ボタン、公開URL表示）は変更されない
2. THE ページ下部の既存のBuyerCandidateListコンポーネントは削除される
3. THE 物件詳細ページの他の機能（編集、保存、同期など）は影響を受けない
4. THE 後方互換性が保たれ、既存のURLやAPIエンドポイントは変更されない
5. THE システム隔離ルールが遵守され、物件リスト管理画面のみが変更される
