# サイドバーカテゴリー表示順序変更 - タスクリスト

## タスク概要

売主リストページのサイドバーにおいて、「担当(イニシャル)」カテゴリーの表示順序を最後に移動する。

---

## タスクリスト

### 1. コード変更

- [x] 1.1 `renderAllCategories()`関数で「担当(イニシャル)」のレンダリング位置を最後に移動
  - ファイル: `frontend/src/components/SellerStatusSidebar.tsx`
  - 変更内容: `categoryCounts?.assigneeGroups`のレンダリングブロックを最後に移動
  - 変更前の位置: `<Button>All</Button>`の直後
  - 変更後の位置: `{renderCategoryButton('pinrichEmpty', ...)}`の直後

---

### 2. 動作確認

- [ ] 2.1 ローカル環境で動作確認
  - [ ] 2.1.1 売主リストページを開く
  - [ ] 2.1.2 サイドバーのカテゴリー順序を確認
  - [ ] 2.1.3 「担当(イニシャル)」が最後に表示されることを確認
  - [ ] 2.1.4 サブカテゴリー（「└ 当日TEL」「└ その他」）が表示されることを確認

- [ ] 2.2 クリック動作の確認
  - [ ] 2.2.1 「担当(Y)」をクリック
  - [ ] 2.2.2 メインテーブルに営担がYの売主のみが表示されることを確認
  - [ ] 2.2.3 「担当(Y)」がハイライトされることを確認
  - [ ] 2.2.4 「└ 当日TEL(Y)」をクリック
  - [ ] 2.2.5 メインテーブルに営担がYかつ次電日が今日以前の売主のみが表示されることを確認

- [ ] 2.3 通話モードページでの確認
  - [ ] 2.3.1 営担がYの売主の通話モードページを開く
  - [ ] 2.3.2 サイドバーのカテゴリー順序を確認
  - [ ] 2.3.3 「担当(Y)」が最後に表示されることを確認
  - [ ] 2.3.4 「担当(Y)」がハイライトされることを確認

---

### 3. デプロイ

- [x] 3.1 Gitにコミット
  - コミットメッセージ: "feat: サイドバーカテゴリーの表示順序を変更（担当を最後に移動）"

- [ ] 3.2 Vercelに自動デプロイ

- [ ] 3.3 本番環境で動作確認
  - [ ] 3.3.1 売主リストページを開く
  - [ ] 3.3.2 サイドバーのカテゴリー順序を確認
  - [ ] 3.3.3 「担当(イニシャル)」が最後に表示されることを確認

---

## 完了条件

- ✅ 「担当(イニシャル)」が最後に表示される
- ✅ サブカテゴリーが正しく表示される
- ✅ クリック動作が正常に動作する
- ✅ 通話モードページでも正常に動作する
- ✅ 本番環境にデプロイされている

---

## 注意事項

### 変更しないこと

- ❌ バックエンドAPI（`backend/src/services/SellerService.supabase.ts`）
- ❌ フィルタリングロジック（`frontend/src/utils/sellerStatusFilters.ts`）
- ❌ カテゴリーの定義
- ❌ カテゴリーの条件

### 確認すること

- ✅ レンダリング順序のみを変更
- ✅ 既存の機能を壊さない
- ✅ パフォーマンスに影響を与えない

---

## トラブルシューティング

### 問題1: サブカテゴリーが表示されない

**原因**: `categoryCounts?.assigneeGroups`のレンダリングブロック全体を移動していない

**解決策**: 
- `categoryCounts?.assigneeGroups.map((group) => { ... })`全体を移動
- サブカテゴリーのレンダリング（`group.todayCallCount`、`group.otherCount`）も含める

---

### 問題2: クリック動作が正常に動作しない

**原因**: `onCategorySelect`の呼び出しが正しくない

**解決策**:
- `onCategorySelect?.('visitScheduled', group.initial)`が正しく呼ばれているか確認
- `selectedVisitAssignee`が正しく設定されているか確認

---

### 問題3: 通話モードページで動作しない

**原因**: `isCallMode`の判定が正しくない

**解決策**:
- `isCallMode`が`true`の場合の処理を確認
- `currentSellerCategory`が正しく設定されているか確認

---

**作成日**: 2026年2月4日  
**作成者**: システム  
**ステータス**: 未着手
